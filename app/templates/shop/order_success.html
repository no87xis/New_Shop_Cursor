{% extends "base.html" %}

{% block title %}Заказ оформлен - Sirius Group V2{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-8">
    <!-- Success Message -->
    <div class="text-center mb-8">
        <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4">
            <i class="fas fa-check text-green-600 text-2xl"></i>
        </div>
        <h1 class="text-3xl font-bold text-gray-800 mb-4">
            Заказ успешно оформлен!
        </h1>
        <p class="text-gray-600 text-lg">
            Спасибо за ваш заказ. Мы свяжемся с вами в ближайшее время.
        </p>
    </div>

    <!-- Order Information -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">
            <i class="fas fa-receipt mr-2"></i>Информация о заказе
        </h2>
        <div class="space-y-3">
            {% for order_code in order_codes %}
            <div class="flex justify-between items-center py-3 border-b border-gray-200">
                <div>
                    <span class="font-medium">Заказ №{{ order_code }}</span>
                    <p class="text-sm text-gray-500">Статус: Ожидает обработки</p>
                </div>
                <div class="text-right">
                    <div class="w-24 h-24 bg-gray-200 rounded-lg flex items-center justify-center">
                        <i class="fas fa-qrcode text-gray-400 text-2xl"></i>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">QR-код</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Important Information -->
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8">
        <h3 class="text-lg font-semibold text-blue-800 mb-3">
            <i class="fas fa-info-circle mr-2"></i>Важная информация
        </h3>
        <ul class="space-y-2 text-blue-700">
            <li class="flex items-start">
                <i class="fas fa-clock mr-2 mt-1 text-sm"></i>
                <span>Заказ резервируется на 48 часов</span>
            </li>
            <li class="flex items-start">
                <i class="fas fa-phone mr-2 mt-1 text-sm"></i>
                <span>Менеджер свяжется с вами для подтверждения заказа</span>
            </li>
            <li class="flex items-start">
                <i class="fab fa-whatsapp mr-2 mt-1 text-sm"></i>
                <span>Вы получите уведомление в WhatsApp о готовности заказа</span>
            </li>
            <li class="flex items-start">
                <i class="fas fa-map-marker-alt mr-2 mt-1 text-sm"></i>
                <span>Адрес пункта выдачи: Наш склад, ул. Примерная, 123</span>
            </li>
        </ul>
    </div>

    <!-- Contact Information -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">
            <i class="fas fa-headset mr-2"></i>Контакты для связи
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="flex items-center">
                <div class="bg-green-100 p-3 rounded-lg mr-4">
                    <i class="fab fa-whatsapp text-green-600 text-xl"></i>
                </div>
                <div>
                    <p class="font-medium text-gray-800">WhatsApp</p>
                    <p class="text-gray-600">+375 (29) 123-45-67</p>
                </div>
            </div>
            <div class="flex items-center">
                <div class="bg-blue-100 p-3 rounded-lg mr-4">
                    <i class="fas fa-phone text-blue-600 text-xl"></i>
                </div>
                <div>
                    <p class="font-medium text-gray-800">Телефон</p>
                    <p class="text-gray-600">+375 (29) 123-45-67</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Next Steps -->
    <div class="bg-gray-50 rounded-lg p-6 mb-8">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">
            <i class="fas fa-list-check mr-2"></i>Что дальше?
        </h3>
        <div class="space-y-3">
            <div class="flex items-center">
                <div class="bg-blue-100 w-8 h-8 rounded-full flex items-center justify-center mr-3">
                    <span class="text-blue-600 font-semibold text-sm">1</span>
                </div>
                <span class="text-gray-700">Менеджер проверит наличие товара</span>
            </div>
            <div class="flex items-center">
                <div class="bg-blue-100 w-8 h-8 rounded-full flex items-center justify-center mr-3">
                    <span class="text-blue-600 font-semibold text-sm">2</span>
                </div>
                <span class="text-gray-700">Свяжется с вами для подтверждения</span>
            </div>
            <div class="flex items-center">
                <div class="bg-blue-100 w-8 h-8 rounded-full flex items-center justify-center mr-3">
                    <span class="text-blue-600 font-semibold text-sm">3</span>
                </div>
                <span class="text-gray-700">Отправит уведомление о готовности</span>
            </div>
            <div class="flex items-center">
                <div class="bg-blue-100 w-8 h-8 rounded-full flex items-center justify-center mr-3">
                    <span class="text-blue-600 font-semibold text-sm">4</span>
                </div>
                <span class="text-gray-700">Вы сможете забрать заказ</span>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex flex-col sm:flex-row gap-4">
        <a href="/shop/" class="flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition duration-300 text-center">
            <i class="fas fa-shopping-bag mr-2"></i>Продолжить покупки
        </a>
        <a href="/" class="flex-1 bg-gray-100 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-200 transition duration-300 text-center">
            <i class="fas fa-home mr-2"></i>На главную
        </a>
    </div>
</div>

<script>
// Очистка корзины после успешного оформления
document.addEventListener('DOMContentLoaded', function() {
    // Очищаем корзину
    fetch('/api/shop/cart/clear', {
        method: 'DELETE'
    }).then(() => {
        // Обновляем счетчик корзины
        updateCartCount();
    }).catch(error => {
        console.error('Error clearing cart:', error);
    });
});

// Показ QR-кодов (заглушка)
function showQRCode(orderCode) {
    alert(`QR-код для заказа ${orderCode} будет доступен после обработки заказа менеджером.`);
}
</script>
{% endblock %}